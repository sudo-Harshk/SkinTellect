{% extends "layout.html" %}

{% block title %}AI Assistant - SkinTellect{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-yellow-50 via-pink-50 to-blue-50 py-16 px-6 relative overflow-hidden">
  <!-- Animated background elements -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div class="absolute top-20 left-10 w-32 h-32 bg-rose-200 rounded-full opacity-20 animate-float"></div>
    <div class="absolute top-40 right-20 w-24 h-24 bg-blue-200 rounded-full opacity-30 animate-float-delayed"></div>
    <div class="absolute bottom-20 left-1/4 w-20 h-20 bg-pink-200 rounded-full opacity-25 animate-float-slow"></div>
    <div class="absolute bottom-40 right-1/3 w-16 h-16 bg-yellow-200 rounded-full opacity-20 animate-float"></div>
  </div>

  <section class="max-w-6xl mx-auto relative z-10">
    <!-- Header -->
    <div class="text-center mb-8">
      <div class="inline-block mb-4">
        <h1 class="text-5xl font-bold bg-gradient-to-r from-rose-600 via-pink-600 to-purple-600 bg-clip-text text-transparent gsap-fade-in">
          AI Assistant
        </h1>
        <div class="h-1 bg-gradient-to-r from-rose-400 to-purple-400 rounded-full mt-2 gsap-scale-x"></div>
      </div>
      <p class="text-xl text-gray-700 mb-6 gsap-fade-in-delayed max-w-2xl mx-auto leading-relaxed">
        Get instant answers about SkinTellect from our AI assistant
      </p>
    </div>

    <!-- Chat Interface -->
    <div class="max-w-4xl mx-auto">
      <div class="bg-white/80 backdrop-blur-md rounded-3xl shadow-2xl border border-rose-100 overflow-hidden">
        <!-- Chat Header -->
        <div class="bg-gradient-to-r from-rose-500 to-pink-500 px-6 py-4 flex items-center space-x-3">
          <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
            </svg>
          </div>
          <div>
            <h3 class="text-white font-semibold">SkinTellect AI Assistant</h3>
            <p class="text-white/80 text-sm">Online â€¢ Ready to help</p>
          </div>
        </div>

        <!-- Chat Messages -->
        <div id="chatMessages" class="h-96 overflow-y-auto p-6 space-y-4">
          <!-- Welcome Message -->
          <div class="flex items-start space-x-3">
            <div class="w-8 h-8 bg-gradient-to-r from-rose-400 to-pink-400 rounded-full flex items-center justify-center flex-shrink-0">
              <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
              </svg>
            </div>
            <div class="bg-gray-100 rounded-2xl rounded-tl-md px-4 py-3 max-w-xs lg:max-w-md">
              <p class="text-gray-800">Hi! I'm your SkinTellect AI assistant. I can help you with questions about our platform, skin analysis, appointments, and more. What would you like to know?</p>
            </div>
          </div>

          <!-- Quick Questions -->
          <div class="flex items-start space-x-3">
            <div class="w-8 h-8 bg-gradient-to-r from-rose-400 to-pink-400 rounded-full flex items-center justify-center flex-shrink-0">
              <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
              </svg>
            </div>
            <div class="bg-gray-100 rounded-2xl rounded-tl-md px-4 py-3 max-w-xs lg:max-w-md">
              <p class="text-gray-800 mb-3">Here are some common questions you can ask:</p>
              <div class="grid grid-cols-1 gap-2">
                <button class="quick-question w-full text-left text-sm text-rose-600 hover:text-rose-700 hover:bg-rose-50 px-3 py-2 rounded-lg transition-colors duration-200" data-question="What is SkinTellect?">
                  ğŸ”¬ What is SkinTellect?
                </button>
                <button class="quick-question w-full text-left text-sm text-rose-600 hover:text-rose-700 hover:bg-rose-50 px-3 py-2 rounded-lg transition-colors duration-200" data-question="How do I upload a skin image?">
                  ğŸ“¸ How do I upload a skin image?
                </button>
                <button class="quick-question w-full text-left text-sm text-rose-600 hover:text-rose-700 hover:bg-rose-50 px-3 py-2 rounded-lg transition-colors duration-200" data-question="Is my data secure?">
                  ğŸ”’ Is my data secure?
                </button>
                <button class="quick-question w-full text-left text-sm text-rose-600 hover:text-rose-700 hover:bg-rose-50 px-3 py-2 rounded-lg transition-colors duration-200" data-question="Can I book a dermatologist appointment?">
                  ğŸ‘©â€âš•ï¸ Can I book a dermatologist appointment?
                </button>
                <button class="quick-question w-full text-left text-sm text-rose-600 hover:text-rose-700 hover:bg-rose-50 px-3 py-2 rounded-lg transition-colors duration-200" data-question="How can I book an appointment?">
                  ğŸ“… How can I book an appointment?
                </button>
                <button class="quick-question w-full text-left text-sm text-rose-600 hover:text-rose-700 hover:bg-rose-50 px-3 py-2 rounded-lg transition-colors duration-200" data-question="Is this a replacement for medical advice?">
                  âš ï¸ Is this a replacement for medical advice?
                </button>
                <button class="quick-question w-full text-left text-sm text-rose-600 hover:text-rose-700 hover:bg-rose-50 px-3 py-2 rounded-lg transition-colors duration-200" data-question="How accurate are the skin analysis results?">
                  ğŸ¯ How accurate are the skin analysis results?
                </button>
                <button class="quick-question w-full text-left text-sm text-rose-600 hover:text-rose-700 hover:bg-rose-50 px-3 py-2 rounded-lg transition-colors duration-200" data-question="Can I track my skin progress over time?">
                  ğŸ“ˆ Can I track my skin progress over time?
                </button>
                <button class="quick-question w-full text-left text-sm text-rose-600 hover:text-rose-700 hover:bg-rose-50 px-3 py-2 rounded-lg transition-colors duration-200" data-question="What skin concerns can SkinTellect detect?">
                  ğŸ” What skin concerns can SkinTellect detect?
                </button>
                <button class="quick-question w-full text-left text-sm text-rose-600 hover:text-rose-700 hover:bg-rose-50 px-3 py-2 rounded-lg transition-colors duration-200" data-question="Show me all questions">
                  ğŸ“‹ Show me all questions
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Chat Input -->
        <div class="border-t border-gray-200 p-4">
          <div class="flex space-x-3">
            <input type="text" id="chatInput" placeholder="Type your question here..." 
                   class="flex-1 px-4 py-3 bg-gray-50 border border-gray-200 rounded-2xl focus:border-rose-400 focus:outline-none focus:ring-2 focus:ring-rose-100 transition-all duration-200">
            <button id="sendButton" class="px-6 py-3 bg-gradient-to-r from-rose-500 to-pink-500 text-white rounded-2xl hover:from-rose-600 hover:to-pink-600 transform hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl flex items-center space-x-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
              </svg>
              <span>Send</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Feature Highlights -->
    <div class="mt-12 grid grid-cols-1 md:grid-cols-3 gap-6">
      <div class="bg-white/70 backdrop-blur-md rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-rose-100">
        <div class="text-center">
          <div class="w-16 h-16 bg-gradient-to-br from-rose-400 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-gray-800 mb-2">24/7 AI Support</h3>
          <p class="text-gray-600 text-sm leading-relaxed">Get instant answers to your questions anytime, anywhere with our intelligent AI assistant.</p>
        </div>
      </div>

      <div class="bg-white/70 backdrop-blur-md rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-rose-100">
        <div class="text-center">
          <div class="w-16 h-16 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-gray-800 mb-2">Instant Responses</h3>
          <p class="text-gray-600 text-sm leading-relaxed">No waiting time - receive immediate, accurate answers to all your SkinTellect questions.</p>
        </div>
      </div>

      <div class="bg-white/70 backdrop-blur-md rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-rose-100">
        <div class="text-center">
          <div class="w-16 h-16 bg-gradient-to-br from-green-400 to-teal-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-gray-800 mb-2">Smart & Helpful</h3>
          <p class="text-gray-600 text-sm leading-relaxed">Our AI understands context and provides personalized, relevant answers to your specific needs.</p>
        </div>
      </div>
    </div>
  </section>
</div>

<!-- Enhanced Scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
<script>
  gsap.registerPlugin(ScrollTrigger);

  // Initial animations
  gsap.set('.gsap-fade-in', { opacity: 0, y: 30 });
  gsap.set('.gsap-fade-in-delayed', { opacity: 0, y: 30 });
  gsap.set('.gsap-scale-x', { scaleX: 0 });

  // Staggered animations
  gsap.to('.gsap-fade-in', {
    opacity: 1,
    y: 0,
    duration: 1,
    ease: "power3.out"
  });

  gsap.to('.gsap-fade-in-delayed', {
    opacity: 1,
    y: 0,
    duration: 1,
    delay: 0.3,
    ease: "power3.out"
  });

  gsap.to('.gsap-scale-x', {
    scaleX: 1,
    duration: 1,
    delay: 0.3,
    ease: "power3.out"
  });

  // Chatbot functionality
  const chatMessages = document.getElementById('chatMessages');
  const chatInput = document.getElementById('chatInput');
  const sendButton = document.getElementById('sendButton');

  // Chat responses database
  const responses = {
    "what is skintellect": {
      answer: "SkinTellect is an AI-powered platform that analyzes your skin and recommends personalized skincare routines. Our advanced machine learning algorithms can detect skin concerns, analyze skin type, and provide tailored recommendations for products and routines that work best for your unique skin profile.",
      icon: "ğŸ”¬"
    },
    "how do i upload a skin image": {
      answer: "Simply go to the 'Skin Analysis' page, take or upload a clear photo of your face in good lighting, and let our AI handle the rest. For best results, ensure your face is well-lit and clearly visible in the image.",
      icon: "ğŸ“¸"
    },
    "is my data secure": {
      answer: "Absolutely! We use end-to-end encryption and comply with GDPR and HIPAA standards. Your personal information and skin images are encrypted and stored securely. We never share your data with third parties without your explicit consent.",
      icon: "ğŸ”’"
    },
    "can i book a dermatologist appointment": {
      answer: "Yes, you can book appointments with certified dermatologists directly through the platform. Our network includes board-certified dermatologists who can provide professional consultation and treatment plans.",
      icon: "ğŸ‘©â€âš•ï¸"
    },
    "how can i book an appointment": {
      answer: "To book an appointment, go to the 'Book Appointment' page on our website. You can select your preferred dermatologist, choose an available time slot, and complete the booking process. You'll receive a confirmation email with all the details.",
      icon: "ğŸ“…"
    },
    "is this a replacement for medical advice": {
      answer: "No. SkinTellect is a supportive tool, not a substitute for professional medical consultation. Always consult with a healthcare professional for serious skin concerns or medical conditions.",
      icon: "âš ï¸"
    },
    "how accurate are the skin analysis results": {
      answer: "Our AI model has been trained on thousands of skin images and achieves high accuracy in detecting common skin concerns. However, results may vary and should be used as a guide alongside professional consultation.",
      icon: "ğŸ¯"
    },
    "can i track my skin progress over time": {
      answer: "Yes! You can upload photos regularly to track your skin's progress and see how your skincare routine is working. The platform will show you before and after comparisons.",
      icon: "ğŸ“ˆ"
    },
    "what skin concerns can skintellect detect": {
      answer: "Our AI can detect various skin concerns including acne, hyperpigmentation, fine lines, dryness, oiliness, and more. The analysis provides detailed insights about your skin condition.",
      icon: "ğŸ”"
    },
    "show me all questions": {
      answer: "Here are all the questions I can help you with:\n\nğŸ”¬ What is SkinTellect?\nğŸ“¸ How do I upload a skin image?\nğŸ”’ Is my data secure?\nğŸ‘©â€âš•ï¸ Can I book a dermatologist appointment?\nğŸ“… How can I book an appointment?\nâš ï¸ Is this a replacement for medical advice?\nğŸ¯ How accurate are the skin analysis results?\nğŸ“ˆ Can I track my skin progress over time?\nğŸ” What skin concerns can SkinTellect detect?\n\nJust click on any question above to get the answer!",
      icon: "ğŸ“‹"
    },
    "hello": {
      answer: "Hello! I'm here to help you with any questions about SkinTellect. Feel free to ask me anything about our platform, skin analysis, appointments, or any other concerns you might have!",
      icon: "ğŸ‘‹"
    },
    "hi": {
      answer: "Hi there! Welcome to SkinTellect. I'm your AI assistant and I'm here to help you with any questions about our platform. What would you like to know?",
      icon: "ğŸ‘‹"
    }
  };

  function addMessage(message, isUser = false) {
    const messageDiv = document.createElement('div');
    messageDiv.className = `flex items-start space-x-3 ${isUser ? 'justify-end' : ''}`;
    
    if (isUser) {
      messageDiv.innerHTML = `
        <div class="bg-gradient-to-r from-rose-500 to-pink-500 text-white rounded-2xl rounded-tr-md px-4 py-3 max-w-xs lg:max-w-md">
          <p>${message}</p>
        </div>
        <div class="w-8 h-8 bg-gradient-to-r from-rose-400 to-pink-400 rounded-full flex items-center justify-center flex-shrink-0">
          <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
          </svg>
        </div>
      `;
    } else {
      messageDiv.innerHTML = `
        <div class="w-8 h-8 bg-gradient-to-r from-rose-400 to-pink-400 rounded-full flex items-center justify-center flex-shrink-0">
          <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
          </svg>
        </div>
        <div class="bg-gray-100 rounded-2xl rounded-tl-md px-4 py-3 max-w-xs lg:max-w-md">
          <p class="text-gray-800 whitespace-pre-line">${message}</p>
        </div>
      `;
    }
    
    chatMessages.appendChild(messageDiv);
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }

  function getResponse(userMessage) {
    const lowerMessage = userMessage.toLowerCase();
    
    // Check for exact matches first
    for (const [key, value] of Object.entries(responses)) {
      if (lowerMessage.includes(key)) {
        return `${value.icon} ${value.answer}`;
      }
    }
    
    // Default response
    return "I'm not sure I understand that question. Please click on one of the questions above or ask about SkinTellect's features, skin analysis, appointments, or data security.";
  }

  function sendMessage() {
    const message = chatInput.value.trim();
    if (message) {
      addMessage(message, true);
      chatInput.value = '';
      
      // Simulate typing delay
      setTimeout(() => {
        const response = getResponse(message);
        addMessage(response);
      }, 1000);
    }
  }

  // Event listeners
  sendButton.addEventListener('click', sendMessage);
  chatInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
      sendMessage();
    }
  });

  // Quick question buttons
  document.querySelectorAll('.quick-question').forEach(button => {
    button.addEventListener('click', () => {
      const question = button.getAttribute('data-question');
      addMessage(question, true);
      
      setTimeout(() => {
        const response = getResponse(question);
        addMessage(response);
      }, 1000);
    });
  });
</script>

<style>
  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-20px); }
  }
  
  @keyframes float-delayed {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-15px); }
  }
  
  @keyframes float-slow {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
  }
  
  .animate-float {
    animation: float 6s ease-in-out infinite;
  }
  
  .animate-float-delayed {
    animation: float-delayed 8s ease-in-out infinite;
    animation-delay: 2s;
  }
  
  .animate-float-slow {
    animation: float-slow 10s ease-in-out infinite;
    animation-delay: 4s;
  }
</style>
{% endblock %} 